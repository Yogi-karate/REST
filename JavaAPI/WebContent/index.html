<!DOCTYPE html>
<html>
   <head>
      <title>Collection Example</title>
      <script src = "https://code.jquery.com/jquery-2.1.3.min.js"
         type = "text/javascript"></script>
      
      <script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"
         type = "text/javascript"></script>
      
      <script src = "https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"
         type = "text/javascript"></script>
		   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   </head>
   <style>
   table,tr,td,th{
border:1px solid black; 
 }
   </style>
   <body>
  
    <table id="commentApp"  class="table table-bordered table-striped">
	<thead>
	<tr><td><button id="add">add new thing</button></td></tr>
	<tr class="danger">
	<th>ID</th>
	<th>Name</th>
	</tr>
	</thead>
<tbody id="list"></tbody>

</table>
<script type="text/template" id="comment-template">
<td><%- id %></td>
<td><%- name %></td>
</script>
      <script type = "text/javascript">
             
     var MyModel = Backbone.Model.extend(
	 {
	  
	 });
    var MyCollection = Backbone.Collection.extend({
        model : MyModel,
		el: '#commentApp',
		url:'http://localhost:8080/JavaAPI/rest/hello',
        parse: function(response) {
		
		console.log(response);
         return response;
        }
       
    });

	
	var stuff=new MyCollection();
	     

	
      
	commView = Backbone.View.extend({
      tagName: 'tr',
      template: _.template($('#comment-template').html()),
      render: function(){
        this.$el.html(this.template(this.model.toJSON()));
        return this; // enable chained calls
      }
    });
	commview = new commView();
	
	
	 commApp = Backbone.View.extend({
      el: '#commentApp',
      initialize: function () {
	    stuff.fetch({
  success: function (collection, response) {
   for(var i=0;i<response.length;i++)
   {
	  var model1=new MyModel({
	  id: response[i].no,
	  name: response[i].name,
	  }); 
        var view = new  commView({model: model1});
       $('#list').append(view.render().el);
   }
		
  }                 
}); 
      
   
      },
      events:
    	  {
    	  "click #add":"addNew"
    	  },
    	  
    	  addNew: function(){
    alert("a");
    		Backbone.ajax({
    			    dataType: "json",
    			    url: "http://localhost:8080/JavaAPI/rest/hell",
    			    type: "GET/POST", 
    			    contentType: "application/json",
    			    data: {name:"test",no: 15},
    		success: function(val)
    		{
    			console.log(val);
    		}
    			});
  
    	  }
         
       
	
    });

	commapp=new commApp();
	
	
      </script>
      
   </body>
</html>